# ===========================================
# INFRASTRUCTURE ENVIRONMENT VARIABLES REFERENCE
# ===========================================
# This file documents all environment variables used across the platform
# Use this as a reference for deployment and configuration

# ===========================================
# DEPLOYMENT PLATFORMS
# ===========================================

# RENDER (Backend Deployment)
# - Service: Web Service
# - Build Command: npm run build:server
# - Start Command: npm start
# - Environment: Node
# - Plan: Starter ($7/month) or higher

# NETLIFY (Frontend Deployment)
# - Build Command: npm run build
# - Publish Directory: out
# - Environment: Node 18+
# - Plan: Pro ($19/month) or higher

# SUPABASE (Database & Auth)
# - Database: PostgreSQL
# - Auth: Supabase Auth
# - Storage: Supabase Storage
# - Plan: Pro ($25/month) or higher

# ===========================================
# BACKEND ENVIRONMENT VARIABLES (RENDER)
# ===========================================

# Core Application
NODE_ENV=production
PORT=10000
API_BASE_URL=https://your-app.onrender.com

# JWT Configuration
JWT_SECRET=your-super-secure-jwt-secret-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Supabase Configuration
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key-here
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key-here

# AI Services
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# Airtable Configuration
AIRTABLE_API_KEY=pat.your-airtable-key-here
AIRTABLE_BASE_ID=your-base-id-here
AIRTABLE_CUSTOMER_ASSETS_TABLE=Customer Assets
AIRTABLE_USER_PROGRESS_TABLE=User Progress

# Security
CORS_ORIGIN=https://your-netlify-app.netlify.app
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_STRICT_MAX=20

# Logging
LOG_LEVEL=info
LOG_FILE=logs/hs-platform-api.log
LOG_FORMAT=combined

# Frontend Integration
FRONTEND_URL=https://your-netlify-app.netlify.app

# ===========================================
# FRONTEND ENVIRONMENT VARIABLES (NETLIFY)
# ===========================================

# Core Application
NODE_ENV=production
NEXT_PUBLIC_SITE_URL=https://your-netlify-app.netlify.app

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key-here

# Backend API
NEXT_PUBLIC_BACKEND_URL=https://your-app.onrender.com

# AI Services
NEXT_PUBLIC_ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# External Services
NEXT_PUBLIC_AIRTABLE_API_KEY=pat.your-airtable-key-here
NEXT_PUBLIC_AIRTABLE_BASE_ID=your-base-id-here

# Security
NEXT_PUBLIC_CORS_ORIGIN=https://your-netlify-app.netlify.app

# Feature Flags
NEXT_PUBLIC_ENABLE_ADVANCED_ANALYTICS=true
NEXT_PUBLIC_ENABLE_EXPERIMENTAL_FEATURES=false
NEXT_PUBLIC_DEBUG_MODE=false

# ===========================================
# SUPABASE CONFIGURATION
# ===========================================

# Database Configuration
# - Host: db.your-project-id.supabase.co
# - Port: 5432
# - Database: postgres
# - Username: postgres
# - Password: [Generated by Supabase]

# Auth Configuration
# - Site URL: https://your-netlify-app.netlify.app
# - Redirect URLs: https://your-netlify-app.netlify.app/auth/callback
# - JWT Secret: [Generated by Supabase]

# Storage Configuration
# - Bucket: customer-assets
# - Public: false
# - File size limit: 50MB

# ===========================================
# EXTERNAL SERVICES CONFIGURATION
# ===========================================

# Anthropic Claude API
# - API Key: sk-ant-api03-...
# - Model: claude-3-sonnet-20240229
# - Rate Limit: 5 requests per minute
# - Cost: $3 per 1M input tokens, $15 per 1M output tokens

# Airtable Integration
# - API Key: pat...
# - Base ID: app...
# - Tables: Customer Assets, User Progress
# - Rate Limit: 5 requests per second

# Make.com Webhooks
# - ICP Webhook: https://hook.eu1.make.com/...
# - Cost Calculator Webhook: https://hook.eu1.make.com/...
# - Business Case Webhook: https://hook.eu1.make.com/...

# ===========================================
# SECURITY CONSIDERATIONS
# ===========================================

# Environment Variable Security
# 1. Never commit .env files to version control
# 2. Use strong, random JWT secrets
# 3. Rotate API keys regularly
# 4. Use different keys for development and production
# 5. Monitor API key usage and costs

# CORS Configuration
# 1. Set specific origins, not wildcards
# 2. Use HTTPS in production
# 3. Validate all incoming requests
# 4. Implement rate limiting

# Database Security
# 1. Use connection pooling
# 2. Enable SSL connections
# 3. Implement row-level security (RLS)
# 4. Regular security updates

# ===========================================
# MONITORING & LOGGING
# ===========================================

# Application Monitoring
# - Render: Built-in monitoring and logs
# - Netlify: Built-in analytics and logs
# - Supabase: Built-in monitoring and logs

# Custom Logging
# - Backend: Winston logger with file and console output
# - Frontend: Console logging with error tracking
# - Database: Supabase audit logs

# Performance Monitoring
# - API Response Times: < 500ms target
# - Database Query Times: < 100ms target
# - Frontend Load Times: < 2s target
# - Error Rates: < 1% target

# ===========================================
# BACKUP & DISASTER RECOVERY
# ===========================================

# Database Backups
# - Supabase: Automatic daily backups
# - Retention: 7 days (free), 30 days (pro)
# - Point-in-time recovery available

# Code Backups
# - GitHub: Primary repository
# - Local: Development machine backups
# - Deployment: Render and Netlify backups

# Configuration Backups
# - Environment variables: Documented in this file
# - Database schema: Version controlled in migrations
# - API keys: Stored securely in deployment platforms

# ===========================================
